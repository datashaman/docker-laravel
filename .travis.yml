sudo: false

services:
  docker

script:
  - cp .env.travis .env
  - composer create-project laravel/laravel --prefer-dist .laravel
  - ./build.sh
  - cp Dockerfile docker-compose.yml .laravel
  - cd .laravel && docker-compose run app phpunit

cache:
  directories:
    - $HOME/.composer/cache
