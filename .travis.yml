sudo: false

language: php
php:
  - 7.2

services:
  docker

script:
  - cp .env.travis .env
  - composer create-project --prefer-dist laravel/laravel .laravel "5.8.*"
  - ./build.sh
  - cp Dockerfile docker-compose.yml .laravel
  - mkdir .laravel/templates && cp templates/nginx.conf templates/php-fpm.conf .laravel/templates
  - cd .laravel && docker-compose run app ./vendor/bin/phpunit

cache:
  directories:
    - $HOME/.composer/cache
